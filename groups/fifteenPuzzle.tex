\documentclass{ximera}

\input{../preamble.tex}

\author{Bart Snapp}

\title{The fifteen puzzle}

\begin{document}
\begin{abstract}
  We use group theory to analyze the fifteen puzzle.
\end{abstract}
\maketitle


\section{The puzzle}

The so-called \textit{fifteen-puzzle} is a toy that experienced great
popularity in the late $1800$'s. The idea of the toy is this: You
have a square frame with $15$ smaller squares and one empty square:
\[
\arraycolsep=6pt\def\arraystretch{1.6}
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & 15 & \cellcolor{black}\\%\textcolor{white}{16} \\
    \Xhline{2pt}
\end{array}
\]
One can rearrange the squares by ``sliding'' them into the empty
space:

\[
\arraycolsep=6pt\def\arraystretch{1.6}
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & 15 & \cellcolor{black}\\%\textcolor{white}{16} \\
    \Xhline{2pt}
\end{array}\quad\lto^{\text{sliding}}\quad
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & \cellcolor{black} & 15 \\
    \Xhline{2pt}
\end{array}
\]
Any number-square can be moved into the empty space, so as our next
move we could do:
\[
\arraycolsep=6pt\def\arraystretch{1.6}
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & \cellcolor{black} & 15 \\
    \Xhline{2pt}
\end{array}\quad\lto^{\text{sliding}}\quad
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & \cellcolor{black} & 12 \\ \hline
    13 & 14 & 11 & 15 \\
    \Xhline{2pt}
\end{array}
\]
Continuing on in this fashion, many there are many possible
arrangements of the number-squares in this puzzle.

While the original puzzle had the numbers $1$--$15$ on the tiles, it is
now common to have a picture. Typically one starts with a scrambled
puzzle, and by sliding squares, they try to return the squares to the
original ordered arrangement:
\[
\arraycolsep=6pt\def\arraystretch{1.6}
\underbrace{\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    2 & 7  & 11 & 15\\ \hline
    14 & 4  & 5  & 9 \\ \hline
    3  &  \cellcolor{black}  & 13 & 10  \\ \hline
    8  & 12 & 6 & 1 \\%\textcolor{white}{16} \\
    \Xhline{2pt}
\end{array}}_{\text{scrambled}}
\quad\lto^{\text{sliding}}\quad
\underbrace{\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & 15 & \cellcolor{black}\\%\textcolor{white}{16} \\
    \Xhline{2pt}
\end{array}}_{\text{solved}}
\]
However, this wasn't the only way the game was played. Sam Loyd offered
$\$1000$ for anyone who could transform the ordered squares as
follows:
\[
\arraycolsep=6pt\def\arraystretch{1.6}
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & 15 & \cellcolor{black} \\
    \Xhline{2pt}
\end{array}\quad\lto^{\text{sliding}}\quad
\underbrace{\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 15 & 14 & \cellcolor{black} \\
    \Xhline{2pt}
\end{array}}_{\$1000}
\]
In today's money Sam Loyd was offering around $\$30000$ for anyone who
could just swap the squares $14$ and $15$. The prize was never
claimed. Let's use group theory to analyze this game and Sam Loyd's
challenge.




\section{Using group theory}

Our basic strategy is to encode the puzzle using elements of $S_{16}$.
To start, let's number the empty square as $16$:
\[
\arraycolsep=6pt\def\arraystretch{1.6}
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & 15 & \cellcolor{black}\textcolor{white}{\boldsymbol{16}} \\
    \Xhline{2pt}
\end{array}
\]
This arrangement of the tiles will correspond to
\[
e = \left(\begin{smallmatrix}
  1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 & 16\\
  1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 & 16
\end{smallmatrix}\right)\in S_{16}.
\]
On the other hand, a scrambled arrangement 
\[
\arraycolsep=6pt\def\arraystretch{1.6}
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    2 & 7  & 11 & 15\\ \hline
    14 & 4  & 5  & 9 \\ \hline
    3  & \cellcolor{black}\textcolor{white}{\boldsymbol{16}}  & 13 & 10  \\ \hline
    8  & 12 & 6 & 1 \\
    \Xhline{2pt}
\end{array}
\]
will correspond to
\[
\left(\begin{smallmatrix}
  1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 & 16\\
  2 & 7 & 11& 15& 14& 4 & 5 & 9 & 3 & 16  & 13 &  10 &  8 & 12 & 6 & 1
\end{smallmatrix}\right)\in S_{16}.
\]

\begin{lemma}
  There is a bijection between the set of configurations of the
  fifteen puzzle and the set $S_{16}$.
  \begin{proof}
    Consider any permutation in $S_{16}$
    \[
    \left(\begin{smallmatrix}
      1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 & 16\\
      a_1 & a_2 & a_3 & a_4 & a_5 & a_6 & a_7 & a_8 & a_9 & a_{10} & a_{11} & a_{12} & a_{13} & a_{14} & a_{15} & a_{16}.
\end{smallmatrix}\right)\
    \]
    this corresponds exactly to the configuration:
    \[
    \arraycolsep=4pt\def\arraystretch{1.6}
    \begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
      \Xhline{2pt}
      a_1  & a_2  & a_3  & a_4 \\ \hline
      a_5  & a_6  & a_7  & a_8 \\ \hline
      a_9  & a_{10} & a_{11} & a_{12} \\ \hline
      a_{13} & a_{14} & a_{15} & \cellcolor{black}\textcolor{white}{\boldsymbol{a_{16}}} \\
      \Xhline{2pt}
    \end{array}
    \]
    We see that they encode the same information in essentially the
    same way; hence this map is bijective.
  \end{proof}
\end{lemma}

\begin{exercise}
  Write out the configuration of the fifteen puzzle corresponding to
  the permutation $\left(\begin{smallmatrix}
    1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 & 16\\
    5 & 3 & 15& 12& 16& 7  & 6 & 8 & 11 & 13 &  1 & 4 & 2 & 10  & 9 & 14
  \end{smallmatrix}\right)$.
\end{exercise}

%% \begin{exercise}
%%   GIVE CONFIG WRITE PERM
%% \end{exercise}


\begin{corollary}[Configurations of the puzzle]
  There are
  \[
  16! = 20922789888000
  \]
  configurations of the fifteen puzzle, with
  \[
  15!=1307674368000
  \]
  configurations for the solved-position, assuming square $16$ is in
  the bottom-right corner.
\end{corollary}


\begin{theorem}[Description of solvable fifteen puzzles]
  If we use our conventions as above, and assume that the empty square
  is in square $16$ when the puzzle is scrambled and when the puzzle is
  solved, then a fifteen puzzle is solvable if and only if the
  scrambled puzzle is an even permutation.
  \begin{proof}
    First note, moving the empty square around is essentially two
    moves. The first move places the empty square in a numbered
    position. The second move allows the empty square to leave the
    numbered position. Hence \textbf{every} move of the empty square
    is in fact the composition of two $2$-cycles. If the puzzle is
    solvable, it was arranged that way through a composition of two
    $2$-cycles, and hence is an even permutation. If the puzzle was
    scrambled via a composition of two $2$-cycles, then we simply undo
    them (apply the inverse) to solve the puzzle.
  \end{proof}
\end{theorem}

\begin{corollary}[14-15 switch is impossible]
  Transforming the puzzle from
  \[
\arraycolsep=6pt\def\arraystretch{1.6}
\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 14 & 15 & \cellcolor{black} \\
    \Xhline{2pt}
\end{array}\quad\lto^{\text{sliding}}\quad
\underbrace{\begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
    \Xhline{2pt}
    1  & 2  & 3  & 4 \\ \hline
    5  & 6  & 7  & 8 \\ \hline
    9  & 10 & 11 & 12 \\ \hline
    13 & 15 & 14 & \cellcolor{black} \\
    \Xhline{2pt}
\end{array}}_{\$1000}
\]
is impossible.
\end{corollary}



%% I feel that we would be remiss if our conversation on fifteen puzzles
%% didn't include an algorithm for solving them.


%% \begin{theorem}[Algorithm for solving fifteen puzzles]
%%   Algorithm For solving 15 puzzle
%%   %http://www.waynesthisandthat.com/15puzzle.htm

%%   Basic moves
%%   \[
%%   \arraycolsep=7pt\def\arraystretch{1.6}
%%   \begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
%%     \Xhline{2pt}
%%     1  & 2 & 3  & X_4 \\ \hline
%%     X_5  & X & X_7  & 4 \\ \hline
%%     X_9  & X_10 & X_11  & \cellcolor{black} \\ \hline
%%     X  & X & X  & X \\
%%     \Xhline{2pt}
%%   \end{array}
%%   \]
%%   \[
%%   (7 \ 8)(8 \ 4)(4 \ 3)(3 \ 2) (2 \ 1)(1\ 5)(5\ 9)(9 \ 10)(10\ 11)(11 \ 12) 
%%   \left(\begin{smallmatrix}
%%     1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 15 & 16\\
%%     1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13 & 14 & 14 & 16
%%   \end{smallmatrix}\right)
%%   \]
  
%%   Basic strategy
%% \end{theorem}



%% \begin{exercise}
%%   Here is a devilish arrangement of a fifteen puzzle that I found in
%%   \textit{Selected topics in mathematics} by E.\ Spitznagel, Jr.
%%   \[
%%   \arraycolsep=7pt\def\arraystretch{1.6}
%%   \begin{array}{!{\vline width 2pt}c|c|c|c!{\vline width 2pt}}
%%     \Xhline{2pt}
%%     R  & A  & T  & E \\ \hline
%%     Y  & O  & U  & R \\ \hline
%%     M  & I & N & D \\ \hline
%%     P & A & L & \cellcolor{black}\\
%%     \Xhline{2pt}
%%   \end{array}
%%   \]
%% \end{exercise}


\end{document}
